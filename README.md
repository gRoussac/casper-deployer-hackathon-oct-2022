<h1 style="text-align: center;"><a href="https://casperlabs.io/"><img src="https://raw.githubusercontent.com/gRoussac/casper-deployer-hackathon-oct-2022/dev/www/apps/frontend/src/assets/logo-dark.svg" width="120" style="position: relative; top:5px" alt="Casper"></a> <b>Deployer</b> - Information and How-To Guides</h1>
<br>

# Welcome to **Project Casper Deployer**!

# **[CasperLabs](https://casperlabs.io/)** Hackaton October 2022 ğŸ‘» ğŸƒğŸ•¯ï¸

## **Project built with ğŸ˜˜â™¥ğŸ’•â¤ for Casper Blockchain** [![codecov](https://codecov.io/gh/gRoussac/casper-deployer-hackathon-oct-2022/branch/master/graph/badge.svg?token=3KWLVN3DPV)](https://codecov.io/gh/gRoussac/casper-deployer-hackathon-oct-2022/)

### ğŸ° Deployed on [Render](https://render.com/) at [https://casper.onrender.com/ ](casper.onrender) ( beta ğŸšï¸ğŸ•¸ï¸ğŸ•·ï¸)

<hr>

# ğŸ“” **Project**

#### This projects aims to ease interactions with <a href="https://casperlabs.io/"><img  style="position: relative; top:3px" alt="Casper" src="https://user-images.githubusercontent.com/3099551/197350250-b9d5852b-44a6-45bb-a227-e12d6d4166c9.jpg" height="20" width="20" alt="Casper"/> Casper Blockchain</a> during smart contracts development and for regular queries done with the [Casper Client CLI](https://github.com/casper-ecosystem/casper-client-rs)

#### This project relies on [casper-js-sdk](https://github.com/casper-ecosystem/casper-js-sdk) and [casper-rust-sdk](https://github.com/casper-ecosystem/rustSDK) to help with onboarding developers on the Casper Network and also users by providing better insights on Casper Blockchain concepts (URef, Dictionnaries etc..) and with giving the ability to deploy a smart contract signed with the [Capser Signer](https://docs.casperlabs.io/workflow/signer-guide/).

<br />
<img alt="image" src="https://user-images.githubusercontent.com/3099551/197349529-ab5a899b-964f-4089-a6ad-84f059b9e50f.png">

<hr><br />

# âœï¸ **Casper Signer**

> Using Chrome or a Chromium-based browser like Brave ? visit the Chrome Web Store, then download and install [CasperLabs Signer extension](https://chrome.google.com/webstore/detail/casper-signer/djhndpllfiibmcdbnmaaahkhchcoijce)

ğŸ“œ CasperLabs Signer acts as your CSPR wallet, keeping your accounts and letting you sign deploys on the Casper Network to perform actions like staking, unstaking or sending your tokens to another person or an exchange account.

### For Casper Signer Users

- <img alt="Casper Signer" src="https://user-images.githubusercontent.com/3099551/197350250-b9d5852b-44a6-45bb-a227-e12d6d4166c9.jpg" alt="Casper Signer" width="20" style="vertical-align:middle"/> [Create/Import an Account using Signer](https://github.com/make-software/how-to-casperlabs/blob/master/docs/user-guides/SignerGuide.md)
- ğŸ‘› [Connect a Wallet](https://github.com/make-software/how-to-casperlabs/blob/master/docs/user-guides/Connect-a-Wallet.md)
- ğŸ’¸ [Transfer CSPR](https://github.com/make-software/how-to-casperlabs/blob/master/docs/user-guides/Transfer-CSPR.md)

#

# ğŸ­ **Tech Stack**

- **Blockchain â›“ï¸**

  <img alt="Casper" width="100" src="https://user-images.githubusercontent.com/3099551/197353903-d2bdc636-9dcd-4e84-8ba7-6887d59f6b8a.png"/>

- **Frontend ğŸ‡**

  <img alt="Angular" src="https://img.shields.io/badge/angular-%23DD0031.svg?style=for-the-badge&logo=angular&logoColor=white"/>
  <img alt="Nx" src="https://img.shields.io/badge/nx-143055?style=for-the-badge&logo=nx&logoColor=white"/>
  <img alt="NPM" src="https://img.shields.io/badge/NPM-%23000000.svg?style=for-the-badge&logo=npm&logoColor=white"/>
  <img alt="JavaScript" src="https://img.shields.io/badge/javascript-%23323330.svg?style=for-the-badge&logo=javascript&logoColor=%23F7DF1E"/>
  <img alt="TypeScript" src="https://img.shields.io/badge/typescript-%23007ACC.svg?style=for-the-badge&logo=typescript&logoColor=white"/>
  <img alt="TailwindCSS" src="https://img.shields.io/badge/tailwindcss-%2338B2AC.svg?style=for-the-badge&logo=tailwind-css&logoColor=white"/>
  <img alt="SASS" src="https://img.shields.io/badge/SASS-hotpink.svg?style=for-the-badge&logo=SASS&logoColor=white"/>
  <img alt="Webpack" src="https://img.shields.io/badge/webpack-%238DD6F9.svg?style=for-the-badge&logo=webpack&logoColor=black"/>

- **Backend ğŸ¦¥**

  <img alt="NestJS" src="https://img.shields.io/badge/nestjs-%23E0234E.svg?style=for-the-badge&logo=nestjs&logoColor=white"/>
  <img alt="Express.js" src="https://img.shields.io/badge/express.js-%23404d59.svg?style=for-the-badge&logo=express&logoColor=%2361DAFB"/>
  <img alt="NodeJS" src="https://img.shields.io/badge/node.js-6DA55F?style=for-the-badge&logo=node.js&logoColor=white"/>
  <img alt="JavaScript" src="https://img.shields.io/badge/javascript-%23323330.svg?style=for-the-badge&logo=javascript&logoColor=%23F7DF1E"/>
  <img alt="TypeScript" src="https://img.shields.io/badge/typescript-%23007ACC.svg?style=for-the-badge&logo=typescript&logoColor=white"/>
  <img alt="Rust" src="https://img.shields.io/badge/rust-%23000000.svg?style=for-the-badge&logo=rust&logoColor=white"/>
  <img alt="WEBASSEMBLY" src="https://img.shields.io/badge/webassembly-%23000000.svg?style=for-the-badge&logo=wasm&logoColor=white"/>

- **Tests ğŸ§ª**

  <img alt="cypress" src="https://img.shields.io/badge/-cypress-%23E5E5E5?style=for-the-badge&logo=cypress&logoColor=058a5e"/>
  <img alt="Jest" src="https://img.shields.io/badge/-jest-%23C21325?style=for-the-badge&logo=jest&logoColor=white"/>

- **ğŸ§**

  <img alt="GitHub" src="https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&logo=github&logoColor=white"/>
  <img alt="GitLab CI" src="https://img.shields.io/badge/gitlab%20ci-%23181717.svg?style=for-the-badge&logo=gitlab&logoColor=white"/>
  <img alt="GitHub Actions" src="https://img.shields.io/badge/github%20actions-%232671E5.svg?style=for-the-badge&logo=githubactions&logoColor=white"/>
  <img alt="Visual Studio Code" src="https://img.shields.io/badge/Visual%20Studio%20Code-0078d7.svg?style=for-the-badge&logo=visual-studio-code&logoColor=white"/>
  <img alt="Render" src="https://img.shields.io/badge/Render-%46E3B7.svg?style=for-the-badge&logo=render&logoColor=white"/>
  <img alt="Docker" src="https://img.shields.io/badge/docker-%230db7ed.svg?style=for-the-badge&logo=docker&logoColor=white"/>
  <img alt="Debian" src="https://img.shields.io/badge/Debian-D70A53?style=for-the-badge&logo=debian&logoColor=white"/>

- **ğŸ¶**

  <img alt="SoundCloud" src="https://img.shields.io/badge/sound%20cloud-FF5500?style=for-the-badge&logo=soundcloud&logoColor=white"/>

#

# ğŸ—ï¸ **Architecture**

## Web Server

Web server is implemented in [Express.js](https://expressjs.com/).

## Api Server

Api server is implemented in [NestJS](https://nestjs.com/)+ [Nx structure](https://nx.dev/).

## Client

UI is implemented in [Angular.js](https://angular.io/) + [Nx structure](https://nx.dev/).

## Smart contracts

Smart contracts are implemented in [Rust](https://www.rust-lang.org/) + [Casper Smart contract Crate](https://docs.rs/casper-contract/latest/casper_contract/).

## Folders at root directory is as follow :

- casper-sdk: contains the Casper Rust SDK in two versions, web and nodejs
- docker: contains Docker files
- wasm: contains client wasm files
- www: contains the Web application files

#

# ğŸ™ **Features**

- Header
  - [âœ“] Integrate with Casper Signer
  - [âœ“] Display active public key and account balance
- Network
  - [âœ“] Input Network Peer
  - [âœ“] Select from Network Peers
  - [âœ“] Check Peer status
  - [âœ“] Change RPC ending suffix
  - [âœ“] Retrieve Root State Hash
- Config
  - [âœ“] Input Root State Hash
  - [âœ“] Retrieve from Signer or input Public Key
  - [âœ“] Retrieve Puse URef associated with Public key
  - [âœ“] Retrieve Balance associated with Public key
- Transfer
  - [âœ“] Transfer from active Public Key
  - [âœ“] Transfer from other Public Key or Purse Uref
  - [âœ“] Transfer to Public Key
  - [âœ“] Transfer to Purse Uref
  - [âœ“] Define Amount to transfer
- Purse
  - [âœ“] Input Purse URef
  - [âœ“] Retrieve Balance associated with URef
- State
  - [âœ“] Input URef / Hash / Deploy Hash / Account Hash
  - [âœ“] Input Named Key Path
  - [âœ“] Retrieve State value
- Dictionaries
  - [âœ“] Input Dictionary item key
  - [âœ“] Input Dictionary URef
  - [âœ“] Input Dictionary name
  - [âœ“] Input Contract hash
  - [âœ“] Retrieve Dictionary value
- Deploy
  - [âœ“] Input Chain name
  - [âœ“] Select from Chain names
  - [âœ“] Input Public Key
  - [âœ“] Input Public Key
  - [âœ“] Input Gas Fee max for a deploy payment
  - [âœ“] Input Time To Live max for a deploy payment
  - [âœ“] Select Wasm file (ModuleBytes)
  - [âœ“] Input Contract or Package name
  - [âœ“] Input Contract or Package hash
  - [âœ“] Input Entry point
  - [âœ“] Input Args
  - [âœ“] Input Contract or Package as target of the deploy
  - [âœ“] Input Package version of the deploy
  - [âœ“] Make deploy
  - [ğŸª²] (bugged) Speculative test deploy
  - [âœ“] Sign with Signer and send deploy to network
- Output
  - [âœ“] Display active query results
- Notes
  - [âœ“] Dummy notes takedown

#

# ğŸ›£ï¸ Roadmap / Todo / Tofix

- [âœ“] Add Dictionnary implementation to test smart contracts
- [âœ“] Add some RPC calls into wasm client side (Rust SDK)
- [âœ“] Add Events watchers
- [ ] Re implement Events watchers from the Rust SDK
- [ ] Casper wallet integration / private key / deprecate Casper Signer
- [ ] Whitelist Signer on casper.onrender.com
- [ ] Fix Github workflow
- [ ] Fix blur events on input
- [ ] Fix UI height
- [ ] Refactor Angular froms building
- [ ] Improve Jest coverage
- [ ] Improve Cypress coverage
- [ ] Add Cypress coverage Github action
- [ ] Improve Css consistentcy
- [âœ“] Fix transfers from URef or non active public key
- [ ] Fix speculative test deploys
- [ ] Add check deploy and size check
- [ ] Add multisignature flow
- [ ] Add delegation / stacking flow ?
- [âœ“] Upgrading smart contracts
- [ ] Escrow app on /escrow route
- [ ] Add Escrow smart contracts
- [ ] Electron app
- [ ] Load / sign deploy

#

# ğŸ§™â€â™€ï¸ **Development**

## Prerequisites

- npm >= 10.2.5
- nodejs >= v20.10.0

This web project was generated and is using

- [Nx](https://nx.dev)

  - [Angular](https://angular.io)
  - [Nest](https://nestjs.com)
  - [Express](https://expressjs.com)

  Runs on

- [Node](https://nodejs.org)

  For tests

- [Jest](https://jestjs.io/)
- [Cypress](https://www.cypress.io/)

  For WebAssembly and Smart contracts on

- [Wasm](https://webassembly.org/)
- [Rust](https://www.rust-lang.org/)

#

# **ğŸ³ Docker**

> Donwload and run image with [docker-compose.yml](./docker/docker-compose.yml) ğŸƒ

```shell
docker-compose -f './docker/docker-compose.yml' up -d
```

### OR

> [Pull](https://hub.docker.com/r/gregoshop/casper-deployer) and run image from https://hub.docker.com/r/gregoshop/casper-deployer ğŸƒâ€â™€ï¸

```shell
docker pull gregoshop/casper-deployer
docker container run -t -i --rm -h casper-deployer -p 4200:4200 gregoshop/casper-deployer
```

### OR

> Build and run image with [Dockerfile](./docker/Dockerfile) ğŸƒâ€â™‚ï¸

```shell
docker build -t casper-deployer ./docker/ --force-rm

docker container run -t -i --rm -h casper-deployer -p 4200:4200 casper-deployer
```

### Navigate to http://localhost:4200/

#

# ğŸ› ï¸ Usage with npm

## Install

> ğŸ“‚ Go to `www` folder

```
cd ./www
```

Run `npm install` to install the application.

```shell
npm install
```

## Development server

Run `npm start` for a dev server. Navigate to http://localhost:4200/. The app will automatically reload if you change any of the source files.

```shell
npm start
```

## Development server as production

Run `npm run start:prod` for a dev server with production configuration. Navigate to http://localhost:4200/.

```shell
npm run start:prod
```

## Build

Run `npm run build` to build the project. The build artifacts will be stored in the `dist/` directory.

```shell
npm run build
```

## Running unit tests

Run `npm run test` to execute the unit tests via [Jest](https://jestjs.io).

```shell
npm run test
```

Run `nx affected:test` to execute the unit tests affected by a change.

## Running end-to-end tests

Run `npm run e2e` to execute the end-to-end tests via [Cypress](https://www.cypress.io).

```shell
npm run e2e
```

Run `nx affected:e2e` to execute the end-to-end tests affected by a change.

## ğŸ  Configuration

Settings can be changed in [/www/libs/util/config/src/config.ts](./www/libs/util/config/src/config.ts)

Default example settings are

```json
{
  "api_prefix": "/api/",
  "gasFee": "150000000",
  "minimumTransfer": "25000000000",
  "TTL": "30m",
  "idMax": "100000000",
  "gasFeeTransfer": "10000"
}
```

## ğŸ“Š Understanding the workspace

Run `nx graph` to see a diagram of the dependencies of the projects.

## ğŸ•â€ğŸ¦º Further help

Visit the [Nx Documentation](https://nx.dev/angular) to learn more.

#

# ğŸš§ Workflow and contributions

âš ï¸ Work in Progress

https://github.com/gRoussac/casper-deployer-hackathon-oct-2022/blob/Development-Workflow

### ğŸ“ License

[GNU GENERAL PUBLIC LICENSE](https://github.com/gRoussac/casper-deployer-hackathon-oct-2022/blob/master/LICENSE.md)

### ğŸ¦º Security

https://github.com/gRoussac/casper-deployer-hackathon-oct-2022/blob/master/SECURITY.md

### â“Have questions?

Go to the `#hackathon` channel [on Discord](https://discord.gg/casperblockchain)

### ğŸª¦ Errors ?

If you see any typos or errors you can edit the code directly on GitHub and raise a Pull Request on `dev` branch, many thanks !
